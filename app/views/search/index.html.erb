<div class="container">
  <div class="row">
    <div class="col-md-3 col-lg-3">
      <%= render "shared/menu" %>
    </div>
    <div class="col-md-9 col-lg-9">
      <%= render "shared/search_form" %>
      <ul class="nav nav-tabs mt-3">
        <li class="nav-item">
          <%= link_to "アーティスト", search_path(query: params[:query], search_type: "artist"),
          class: "nav-link #{params[:search_type] == "artist" ? "active" : ""}" %>
        </li>
        <li class="nav-item">
          <%= link_to "曲", search_path(query: params[:query], search_type: "track"),
          class: "nav-link #{params[:search_type] == "track" ? "active" : ""}" %>
        </li>
      </ul>
      <div class="mt-3">
        <% if params[:search_type] == "artist" %>
          <% @artists.each do |artist| %>
            <%= link_to posts_path(artist_name: artist.name), class: "text-decoration-none" do %>
              <div class="card mb-3 p-2 text-white">
                <div class="card-body d-flex align-items-center">
                  <% if artist.images.any? %>
                    <%= image_tag(artist.images.first["url"], alt: artist.name, class: "me-3 rounded-circle search-image") %>
                  <% else %>
                    <%= image_tag("no_image.png", alt: "No Image", class: "me-3 rounded-circle search-image") %>
                  <% end %>
                  <h6 class="mb-0"><%= artist.name %></h6>
                </div>
              </div>
            <% end %>
          <% end %>
        <% elsif params[:search_type] == "track" %>
          <% @tracks.each do |track| %>
            <% artist_name = track.artists.first.name %>
            <% song_title = track.name %>
            <%= link_to posts_path(artist_name: artist_name, song_title: song_title), class: "text-decoration-none" do %>
              <div class="card mb-3 p-2 text-white">
                <div class="card-body d-flex align-items-center">
                  <% if track.album && track.album.images.any? %>
                    <%= image_tag(track.album.images.first["url"], alt: track.name, class: "me-3 rounded search-image") %>
                  <% else %>
                    <%= image_tag("no_image.png", alt: "No Image", class: "me-3 rounded search-image") %>
                  <% end %>
                  <div class="card-track">
                    <h6 class="card-title mb-0"><%= track.name %></h6>
                    <p class="card-text small"><%= track.artists.first.name %></p>
                  </div>
                </div>
              </div>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
